!function(e){"use strict";function n(e){this.$el=e,this.$mediaSections=this.$el.find(".nectar-sticky-media-section__featured-media"),this.$contentSections=this.$el.find(".nectar-sticky-media-section__content"),this.usingFrontEndEditor=!(!window.nectarDOMInfo||!window.nectarDOMInfo.usingFrontEndEditor),this.direction="down",this.prevScroll=0,this.events()}var t=n.prototype;t.events=function(){this.usingFrontEndEditor&&this.rebuildMedia(),window.nectarDOMInfo&&window.nectarDOMInfo.usingMobileBrowser&&window.nectarDOMInfo.winW<1e3||(this.observe(),this.trackDirection(),this.verticallyCenter(),e(window).on("resize",this.verticallyCenter.bind(this)))},t.verticallyCenter=function(){if(window.nectarDOMInfo){var n=0;n=e("body").is('[data-header-format="left-header"]')||e("body").is('[data-hhun="1"]')||e("#header-outer").length>0&&e("#header-outer").is('[data-permanent-transparent="1"]')||e(".page-template-template-no-header-footer").length>0||e(".page-template-template-no-header").length>0?0:e("#header-space").length>0?e("#header-space").height():0,window.nectarDOMInfo.adminBarHeight>0&&(n+=window.nectarDOMInfo.adminBarHeight);var t=(window.nectarDOMInfo.winH-this.$mediaSections.height())/2+n/2;this.$el[0].style.setProperty("--nectar-sticky-media-sections-vert-y",t+"px")}},t.trackDirection=function(){window.nectarDOMInfo.scrollTop>this.prevScroll?this.direction="down":this.direction="up",this.prevScroll=window.nectarDOMInfo.scrollTop,window.requestAnimationFrame(this.trackDirection.bind(this))},t.observe=function(){var n=this;this.sections=Array.from(this.$contentSections.find("> div")),"IntersectionObserver"in window&&(window.nectarDOMInfo.usingMobileBrowser&&window.nectarDOMInfo.winW<1e3?(this.mobileObserver=new IntersectionObserver(function(t){t.forEach(function(t){if(t.isIntersecting){var i=e(t.target).index(),o=n.$contentSections.find("> .nectar-sticky-media-section__content-section:eq("+i+")");o.find("video.no-loop").length>0&&n.playSectionVideo(o.find("video.no-loop")[0]),n.mobileObserver.unobserve(t.target)}})},{rootMargin:"-5% 0% -5% 0%",threshold:0}),this.$contentSections.find("> div").each(function(){n.mobileObserver.observe(e(this)[0])})):(this.observer=new IntersectionObserver(function(t){t.forEach(function(t){var i="down"===n.direction?n.getTargetSection(t):t.target;if(n.shouldUpdate(t)&&(0!=window.nectarDOMInfo.scrollTop||"down"!==n.direction)){var o=e(i).index(),r=n.$mediaSections.find("> .nectar-sticky-media-section__media-wrap:eq("+o+")"),c=n.$contentSections.find("> .nectar-sticky-media-section__content-section:eq("+o+")");n.$mediaSections.find("> .nectar-sticky-media-section__media-wrap").removeClass("active"),r.addClass("active"),r.find("video.no-loop").length>0&&window.nectarDOMInfo.winW>999&&n.playSectionVideo(r.find("video.no-loop")[0]),c.find("video.no-loop").length>0&&window.nectarDOMInfo.winW<1e3&&n.playSectionVideo(c.find("video.no-loop")[0])}})},{rootMargin:"-45% 0% -45% 0%",threshold:0}),this.$contentSections.find("> div").each(function(){n.observer.observe(e(this)[0])})))},t.playSectionVideo=function(e){e.pause(),e.currentTime=0,e.play()},t.getTargetSection=function(e){var n=this.sections.findIndex(function(n){return n==e.target});return n>=this.sections.length-1?e.target:this.sections[n+1]},t.shouldUpdate=function(e){return"down"===this.direction&&!e.isIntersecting||!("up"!==this.direction||!e.isIntersecting)},t.rebuildMedia=function(){var n=this,t=[];this.$contentSections.find(".nectar-sticky-media-section__content-section").each(function(n){e(this).find(".nectar-sticky-media-content__media-wrap").length>1&&e(this).find(".nectar-sticky-media-content__media-wrap").each(function(n){n>0&&e(this).remove()}),t[n]=e(this).find(".nectar-sticky-media-content__media-wrap").clone(),t[n].removeClass("nectar-sticky-media-content__media-wrap").addClass("nectar-sticky-media-section__media-wrap")}),n.$mediaSections.html(" "),t.forEach(function(e){n.$mediaSections.append(e)}),e(window).trigger("salient-lazyloading-image-reinit")};var i=[];function o(){i=[],e(".nectar-sticky-media-sections").each(function(t){i[t]=new n(e(this))})}e(document).ready(function(){o(),e(window).on("vc_reload",function(){setTimeout(o,200)})})}(jQuery);